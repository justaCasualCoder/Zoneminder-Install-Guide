{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Zoneminder Install Script","text":"<p>This repository contains a script to install Zoneminder and a LAMP Stack on the following linux distributions - </p> <ul> <li> Alpine Linux</li> <li> Arch Linux</li> <li> Ubuntu Linux</li> <li> Android ( Termux Debian Proot - My Install Scripts )</li> <li> Debian Linux</li> <li> Fedora Linux (Need to test again)</li> <li> OpenSuSE TumbleWeed</li> <li>Most other systems using Docker</li> </ul> <p>Currently the most stable distro to install on is : Debian 12</p> <p>If you would like a support for a Linux distro , create a issue and i will try to add support!</p>"},{"location":"#docker","title":"Docker","text":"<p>Docker is now working - it is a very early image based on Debian - you can use it by running <pre><code>docker run -d ghcr.io/justacasualcoder/zoneminder-installerscript:main\n</code></pre> It will start Apache2 Mariadb and Zoneminder inside the container</p>"},{"location":"about/","title":"About the program","text":"<p>I made this because I LOVED Zoneminder, although I had no idea how to get it set up. After a few months, I learned how to install it (as well as Apache and MariaDB) on multiple Linux OSs.  I wanted to make it easier for other people to try Zoneminder, and since I was learning BASH then, I decided to try to make this script. Since then it has just been a fun project for me...</p> <p>Please see the project license.</p>"},{"location":"user-guide/Alpine/","title":"Alpine Linux","text":"<ol> <li> <p>Set up repo   <pre><code>cat &gt; /etc/apk/repositories &lt;&lt; EOF\nhttp://dl-cdn.alpinelinux.org/alpine/v$(cat /etc/alpine-release | cut -d'.' -f1,2)/main\nhttp://dl-cdn.alpinelinux.org/alpine/v$(cat /etc/alpine-release | cut -d'.' -f1,2)/community\nEOF\napk update\n</code></pre></p> </li> <li> <p>Install Zoneminder , MariaDB , PHP , and Apache2 &amp; Enable CGI   <pre><code>apk add apache2 php81-apache2 php8-pdo php8-pdo_mysql mariadb mysql-client  php81-fpm php81-pdo php81-pdo_mysql\napk add zoneminder\nsed -i 's/Options None/Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch/' /etc/apache2/httpd.conf\n</code></pre></p> </li> <li> <p>Set up MariaDB Databases   <pre><code>service mariadb setup\nservice mariadb start\ncat &lt;&lt; EOF | mysql\nBEGIN;\nCREATE DATABASE zm;\nCREATE USER zmuser@localhost IDENTIFIED BY 'zmpass';\nGRANT ALL ON zm.* TO zmuser@localhost;\nFLUSH PRIVILEGES;\nEOF\nmariadb -u zmuser -pzmpass &lt; /usr/share/zoneminder/db/zm_create.sql\n</code></pre></p> </li> <li> <p>Start Everything   <pre><code>service mariadb start\nservice apache2 start\nservice zoneminder start\n</code></pre></p> </li> </ol>"},{"location":"user-guide/Arch%20Linux/","title":"Arch Linux","text":"<ol> <li>Install yay   <pre><code>sudo pacman -S fakeroot make git base-devel glibc\ncd /opt\nsudo mkdir yay\nsudo chown $(whoami):$(whoami) yay\ngit clone https://aur.archlinux.org/yay-bin.git yay\ncd yay\nmakepkg -si\n</code></pre></li> <li>Install MySQL , PHP , and Apache   <pre><code>sudo pacman -S apache mysql sudo php php-apache php-fpm\n</code></pre></li> <li>Fix PHP intl.   <pre><code>sudo pacman -S icu \nyay -S icu72 --noprovides --answerdiff None --answerclean None --mflags \"--noconfirm\"\nsystemctl restart httpd\n</code></pre></li> <li>Enable Apache2 Modules   <pre><code>echo \"Include conf/extra/php_module.conf\" &gt;&gt; /etc/httpd/conf/httpd.conf\nsed -i 's/^LoadModule mpm_event_module modules\\/mod_mpm_event\\.so/#&amp;/' /etc/httpd/conf/httpd.conf\nsed -i 's/^#LoadModule mpm_prefork_module modules\\/mod_mpm_prefork\\.so/LoadModule mpm_prefork_module modules\\/mod_mpm_prefork.so/' /etc/httpd/conf/httpd.conf\nsed -i '/^#LoadModule/s/$/\\nLoadModule php_module modules\\/libphp.so\\nAddHandler php-script .php/' /etc/httpd/conf/httpd.conf\nsed -i '$ a Include conf\\/extra\\/php_module.conf' /etc/httpd/conf/httpd.conf\necho \"Include conf/extra/zoneminder.conf\" &gt;&gt; /etc/httpd/conf/httpd.conf\nsed -i 's|^#\\(LoadModule proxy_module modules/mod_proxy.so\\)|\\1|' /etc/httpd/conf/httpd.conf\nsed -i 's|^#\\(LoadModule proxy_fcgi_module modules/mod_proxy_fcgi.so\\)|\\1|' /etc/httpd/conf/httpd.conf\nsed -i 's|^#\\(LoadModule rewrite_module modules/mod_rewrite.so\\)|\\1|' /etc/httpd/conf/httpd.conf\nsed -i 's|^#\\(LoadModule cgid_module modules/mod_cgid.so\\)|\\1|' /etc/httpd/conf/httpd.conf\nsudo sed -i '$ a\\LoadModule cgid_module modules/mod_cgid.so' /etc/httpd/conf/httpd.conf\n</code></pre></li> <li>Install Zoneminder &amp; start Apache    <pre><code>export PATH=$PATH:/usr/bin/core_perl/\nyay -S zoneminder\nsudo sed -i \"7,9 {s/^/#/}\" /etc/httpd/conf/extra/zoneminder.conf\nsudo systemctl restart httpd\n</code></pre></li> <li>Set up MySQL Database   <pre><code>sudo mysql_install_db --user=mysql --basedir=/usr/ --ldata=/var/lib/mysql/\nsudo systemctl start mariadb\ncat &lt;&lt; EOF | sudo mysql\nBEGIN;\nCREATE DATABASE zm;\nCREATE USER zmuser@localhost IDENTIFIED BY 'zmpass';\nGRANT ALL ON zm.* TO zmuser@localhost;\nFLUSH PRIVILEGES;\nEOF\nmariadb -u zmuser -pzmpass &lt; /usr/share/zoneminder/db/zm_create.sql\n</code></pre></li> <li>Start &amp; Enable everything   <pre><code>sudo systemctl start httpd mysqld zoneminder\nsudo systemctl enable zoneminder httpd mysqld \n# systemctl start mysqld\n# systemctl start php-fpm\n# systemctl start zoneminder\n# systemctl enable httpd\n# systemctl enable mysqld\n# systemctl enable php-fpm\n# systemctl enable zoneminder\n</code></pre></li> </ol>"},{"location":"user-guide/Debian/","title":"Debian Linux","text":"<p>This should work for Debian 11/12</p> <ol> <li> <p>Update &amp; install  Apache , PHP , and MariaDB   <pre><code>apt update\napt install apache2 mariadb-server php libapache2-mod-php php-mysql lsb-release gnupg2 gpgv -y\n</code></pre></p> </li> <li> <p>Set up MariaDB database   <pre><code>cat &lt;&lt; EOF | mysql\nBEGIN;\nCREATE DATABASE zm;\nCREATE USER zmuser@localhost IDENTIFIED BY 'zmpass';\nGRANT ALL ON zm.* TO zmuser@localhost;\nFLUSH PRIVILEGES;\nEOF\n</code></pre></p> </li> <li> <p>Install Zoneminder &amp; create MariaDB ZM database   <pre><code>echo 'deb http://deb.debian.org/debian bullseye-backports main contrib' &gt;&gt; /etc/apt/sources.list\napt update &amp;&amp; apt -t bullseye-backports install zoneminder -y\nmariadb -u zmuser -pzmpass &lt; /usr/share/zoneminder/db/zm_create.sql\nchgrp -c www-data /etc/zm/zm.conf\n</code></pre></p> </li> <li> <p>Enable Apache modules   <pre><code>a2enconf zoneminder\nadduser www-data video\na2enconf zoneminder\na2enmod rewrite\na2enmod headers\na2enmod expires\na2enmod cgi\n</code></pre></p> </li> <li> <p>Start &amp; Enable everything   <pre><code>systemctl start apache2 zoneminder mariadb\nsystemctl enable apache2 zoneminder mariadb\n</code></pre></p> </li> </ol>"},{"location":"user-guide/Debian11/","title":"Debian Linux","text":"<p>This should work for Debian 11</p> <ol> <li> <p>Update &amp; install  Apache , PHP , and MariaDB   <pre><code>apt update\napt install apache2 mariadb-server php libapache2-mod-php php-mysql lsb-release gnupg2 gpgv -y\n</code></pre></p> </li> <li> <p>Set up MariaDB database   <pre><code>cat &lt;&lt; EOF | mysql\nBEGIN;\nCREATE DATABASE zm;\nCREATE USER zmuser@localhost IDENTIFIED BY 'zmpass';\nGRANT ALL ON zm.* TO zmuser@localhost;\nFLUSH PRIVILEGES;\nEOF\n</code></pre></p> </li> <li> <p>Install Zoneminder &amp; create MariaDB ZM database   <pre><code>echo 'deb http://deb.debian.org/debian bullseye-backports main contrib' &gt;&gt; /etc/apt/sources.list\napt update &amp;&amp; apt -t bullseye-backports install zoneminder -y\nmariadb -u zmuser -pzmpass &lt; /usr/share/zoneminder/db/zm_create.sql\nchgrp -c www-data /etc/zm/zm.conf\n</code></pre></p> </li> <li> <p>Enable Apache modules   <pre><code>a2enconf zoneminder\nadduser www-data video\na2enconf zoneminder\na2enmod rewrite\na2enmod headers\na2enmod expires\na2enmod cgi\n</code></pre></p> </li> <li> <p>Start &amp; Enable everything   <pre><code>systemctl start apache2 zoneminder mariadb\nsystemctl enable apache2 zoneminder mariadb\n</code></pre></p> </li> </ol>"},{"location":"user-guide/Debian12/","title":"Debian Linux","text":"<p>This should work for Debian 12</p> <ol> <li> <p>Update &amp; install  Apache , PHP , and MariaDB   <pre><code>apt update\napt install apache2 mariadb-server php libapache2-mod-php php-mysql lsb-release gnupg2 -y\n</code></pre></p> </li> <li> <p>Set up MariaDB database   <pre><code>cat &lt;&lt; EOF | mysql\nBEGIN;\nCREATE DATABASE zm;\nCREATE USER zmuser@localhost IDENTIFIED BY 'zmpass';\nGRANT ALL ON zm.* TO zmuser@localhost;\nFLUSH PRIVILEGES;\nEOF\n</code></pre></p> </li> <li>Install Zoneminder &amp; create MariaDB ZM database   <pre><code>apt install zoneminder -y\nmariadb -u zmuser -pzmpass &lt; /usr/share/zoneminder/db/zm_create.sql\nchgrp -c www-data /etc/zm/zm.conf\nchmod 640 /etc/zm/zm.conf\n</code></pre></li> <li>Set up Apache2 Conf   <pre><code>chown -R www-data:www-data /var/cache/zoneminder/\nchmod 755 /var/cache/zoneminder/\ncp /etc/apache2/conf-available/zoneminder.conf /etc/apache2/conf-available/zoneminder.conf.bak \nrm /etc/apache2/conf-available/zoneminder.conf\ncat &lt;&lt; EOF &gt;&gt; /etc/apache2/conf-available/zoneminder.conf\n# Remember to enable cgi mod (i.e. \"a2enmod cgi\").\nScriptAlias /zm/cgi-bin \"/usr/lib/zoneminder/cgi-bin\"\n&lt;Directory \"/usr/lib/zoneminder/cgi-bin\"&gt;\n    Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch\n    AllowOverride All\n    Require all granted\n&lt;/Directory&gt;\n\n\n# Order matters. This alias must come first.\nAlias /zm/cache \"/var/cache/zoneminder\"\n&lt;Directory \"/var/cache/zoneminder\"&gt;\n    Options -Indexes +FollowSymLinks\n    AllowOverride None\n    &lt;IfModule mod_authz_core.c&gt;\n        # Apache 2.4\n        Require all granted\n    &lt;/IfModule&gt;\n&lt;/Directory&gt;\n\nAlias /zm /usr/share/zoneminder/www\n&lt;Directory /usr/share/zoneminder/www&gt;\n  Options -Indexes +FollowSymLinks\n  &lt;IfModule mod_dir.c&gt;\n    DirectoryIndex index.php\n  &lt;/IfModule&gt;\n&lt;/Directory&gt;\n\n# For better visibility, the following directives have been migrated from the\n# default .htaccess files included with the CakePHP project.\n# Parameters not set here are inherited from the parent directive above.\n&lt;Directory \"/usr/share/zoneminder/www/api\"&gt;\n   RewriteEngine on\n   RewriteRule ^$ app/webroot/ [L]\n   RewriteRule (.*) app/webroot/$1 [L]\n   RewriteBase /zm/api\n&lt;/Directory&gt;\n\n&lt;Directory \"/usr/share/zoneminder/www/api/app\"&gt;\n   RewriteEngine on\n   RewriteRule ^$ webroot/ [L]\n   RewriteRule (.*) webroot/$1 [L]\n   RewriteBase /zm/api\n&lt;/Directory&gt;\n\n&lt;Directory \"/usr/share/zoneminder/www/api/app/webroot\"&gt;\n    RewriteEngine On\n    RewriteCond %{REQUEST_FILENAME} !-d\n    RewriteCond %{REQUEST_FILENAME} !-f\n    RewriteRule ^ index.php [L]\n    RewriteBase /zm/api\n&lt;/Directory&gt;\nEOF\n</code></pre></li> <li> <p>Enable Apache modules   <pre><code>a2enconf zoneminder\nadduser www-data video\na2enconf zoneminder\na2enmod rewrite\na2enmod headers\na2enmod expires\na2enmod cgi\n</code></pre></p> </li> <li> <p>Start &amp; Enable everything   <pre><code>systemctl start apache2 zoneminder mariadb\nsystemctl enable apache2 zoneminder mariadb\n</code></pre></p> </li> </ol>"},{"location":"user-guide/Fedora/","title":"Fedora Linux","text":"<ol> <li>Set up repo &amp; install MariaDB , PHP , Apache , Zoneminder &amp; Enable Zoneminder conf   <pre><code>dnf install https://mirrors.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm https://mirrors.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm -y\ndnf install nano sed httpd mariadb-server php  php-common php-mysqlnd zoneminder-httpd mod_ssl -y\nln -sf /etc/zm/www/zoneminder.httpd.conf /etc/httpd/conf.d/\n</code></pre></li> <li>Start MariaDB &amp; set up database   <pre><code>systemctl start mariadb\nmysql &lt; /usr/share/zoneminder/db/zm_create.sql\ncat &lt;&lt; EOF | mysql\nBEGIN;\nCREATE USER zmuser@localhost IDENTIFIED BY 'zmpass';\nGRANT ALL ON zm.* TO zmuser@localhost;\nFLUSH PRIVILEGES;\nEOF\n</code></pre></li> <li> <p>Start &amp; Enable everything   <pre><code>setenforce 0\nsystemctl start httpd zoneminder mariadb\nsystemctl enable httpd zoneminder mariadb\n</code></pre></p> </li> <li> <p>Set firewall open ports &amp; Update Zoneminder database   <pre><code>firewall-cmd --permanent --add-service=http\nfirewall-cmd --permanent --add-service=https\nfirewall-cmd  --add-service=http --add-service=https\nzmupdate.pl -f\n</code></pre></p> </li> </ol>"},{"location":"user-guide/OpenSUSE/","title":"OpenSuSE Linux","text":"<p>This should work on OpenSUSE Tumbleweed</p> <ol> <li>Set up zoneminder repo   <pre><code>zypper addrepo https://download.opensuse.org/repositories/security:zoneminder/openSUSE_Tumbleweed/security:zoneminder.repo\nzypper --gpg-auto-import-keys refresh\nzypper -n refresh\n</code></pre></li> <li> <p>Install Zoneminder   <pre><code>zypper -n install apache2 php php-mysql php-gd php-mbstring apache2-mod_php8 mariadb mariadb-client ZoneMinder php8-intl\n</code></pre></p> </li> <li> <p>Enable Apache2 Modules   <pre><code>a2enmod rewrite\na2enmod headers\na2enmod expires\na2enmod php8\n</code></pre></p> </li> <li>Set up MariaDB database   <pre><code>cat &lt;&lt; EOF | mariadb\nBEGIN;\nCREATE DATABASE zm;\nCREATE USER zm_admin@localhost IDENTIFIED BY 'zmpass';\nGRANT ALL ON zm.* TO zm_admin@localhost;\nFLUSH PRIVILEGES;\nEOF\nmariadb -u zm_admin -pzmpass &lt; /usr/share/zoneminder/db/zm_create.sql\n</code></pre></li> <li>Set up firewall   <pre><code>firewall-cmd --permanent --add-port=80/tcp\nfirewall-cmd --permanent --add-port=443/tcp\nfirewall-cmd --reload\n</code></pre></li> <li>Start &amp; Enable everything   <pre><code>systemctl start apache2 zoneminder mariadb\nsystemctl enable apache2 zoneminder mariadb\n</code></pre></li> </ol>"},{"location":"user-guide/Test%20In%20Docker/","title":"Testing in Docker","text":"<p>Currently in development, there is a script called <code>testindocker.sh</code>. The goal of this is to test multiple distros with the install script. It checks if localhost/zm connects and determines if Zoneminder is working or not. The final goal of this is to have it check nightly using GitHub actions. Distro support for docker test script:</p> <ul> <li> Alpine Linux</li> <li> Arch Linux</li> <li> Ubuntu Linux</li> <li> Android ( Termux Debian Proot - My Install Scripts )</li> <li> Debian Linux</li> <li> Fedora Linux</li> <li> OpenSuSE TumbleWeed</li> </ul> <p>Example running it (Have docker installed!):</p> <pre><code>./testindocker.sh Ubuntu\n</code></pre>"},{"location":"user-guide/Ubuntu/","title":"Ubuntu Linux","text":"<p>This should work on Ubuntu 20/21/22/23</p> <ol> <li>Update &amp; install  Apache , PHP , and MariaDB   <pre><code>apt update\napt install apache2 mariadb-server php libapache2-mod-php php-mysql lsb-release gnupg2 gpgv -y\n</code></pre></li> <li> <p>Set up MariaDB database   <pre><code>cat &lt;&lt; EOF | mysql\nBEGIN;\nCREATE DATABASE zm;\nCREATE USER zmuser@localhost IDENTIFIED BY 'zmpass';\nGRANT ALL ON zm.* TO zmuser@localhost;\nFLUSH PRIVILEGES;\nEOF\n</code></pre></p> </li> <li> <p>Install Zoneminder &amp; create MariaDB ZM database   <pre><code>add-apt-repository universe\napt update \napt install zoneminder -y\nmariadb -u zmuser -pzmpass &lt; /usr/share/zoneminder/db/zm_create.sql\nchgrp -c www-data /etc/zm/zm.conf\n</code></pre></p> </li> <li>Enable Apache modules   <pre><code>a2enconf zoneminder\nadduser www-data video\na2enconf zoneminder\na2enmod rewrite\na2enmod headers\na2enmod expires\na2enmod cgi\n</code></pre></li> <li>Start &amp; Enable everything   <pre><code>systemctl start apache2 zoneminder mariadb\nsystemctl enable apache2 zoneminder mariadb\n</code></pre></li> </ol>"}]}